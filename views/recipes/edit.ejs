<%- include('../partials/header') %>

    <h2>
        Update Recipe
    </h2>
    <nav>
        <ul>
            <li><a href="/recipes/<%= recipe.id %>">Back to Recipe</a></li>
        </ul>
    </nav>

<form action="/recipes/<%= recipe.id %>?_method=PUT" method="POST">
        <label for="name">Recipe Name:</label>
        <input type="text" name="name" value="<%= recipe.name %>" required>

        <label for="serves">Serves:</label>
        <input type="number" name="serves" value="<%= recipe.serves %>">

        <div class="ingredients-container">
            <label for="ingredients">Ingredients:</label><br />
            <% recipe.ingredients.forEach((ingredient) => { %>
                <div class="ingt-info">
                    <select name="ingredients[]">
                        <% userInventory.forEach((product)=> { %>
                            <option value="<%= product.productName %>" name="product[]" class="ingt-options" <%= ingredient.product.productName === product.productName ? 'selected' : '' %> >
                                <%= product.productName %>
                            </option>
                        <% }) %>
                    </select>
                    <input type="number" step="0.0001" name="quantityRequired[]" value="<%= ingredient.quantityRequired %>" class="add-qty">
                </div>
            <% }) %>
        </div>
        <button type="button" class="add-ingt-btn">Add Additional Ingredient</button>

        <div class="method-container">
            <label>Method:</label>
            <% recipe.method.forEach((step, i)=> { %>
                <div class="method-step">
                    <input type="text" name="method[]" value="<%= recipe.method[i] %>"></input>
                </div>
            <% }) %>
        </div>
        <button type="button" class="add-step-btn">Add Additional Step</button><br />
        <button type="submit">Update Recipe</button>
    </form>
    <form action="/recipes/<%= recipe.id %>?_method=DELETE" method="POST">
        <!-- Referenced: https://stackoverflow.com/questions/9139075/how-to-show-a-confirm-message-before-delete -->
        <button type="submit" onclick="return confirm('Are you sure you want to delete this recipe?');">Delete Recipe</button>

    <%- include('../partials/footer') %>